<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
  <title>Bookshelfly</title>

  <!-- ВАЖНО: стили лоадера inline, чтобы работали сразу -->
  <style>
    #app-loader {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #090909;
      z-index: 999999;
    }

    #app-loader img {
      width: 120px;
      height: 120px;
      animation: pulse 1.1s ease-in-out infinite;
      opacity: 0.95;
    }

    @keyframes pulse {
      0%   { transform: scale(0.92); opacity: 0.75; }
      50%  { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(0.92); opacity: 0.75; }
    }
  </style>

  <!-- можно оставить tailwind, но он не нужен для лоадера -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body class="bg-zinc-950 text-zinc-100">
  <!-- Лоадер должен быть ПЕРВЫМ в body -->
  <div id="app-loader">
    <img src="./icon.png" alt="Bookshelf loading" />
  </div>

  <!-- Login modal -->
  <div id="auth-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.7); z-index:1000000;">
    <div style="max-width:360px; margin:10vh auto; background:#111; border:1px solid #333; border-radius:14px; padding:20px; color:#fff; text-align:center;">

      <!-- Icon -->
      <img
        src="./icon.png"
        alt="Bookshelf"
        style="width:72px; height:72px; margin:0 auto 14px auto; display:block; opacity:.95;"
      />

      <div style="font-size:18px; font-weight:700; margin-bottom:6px;">
        Вход
      </div>

      <div style="font-size:13px; opacity:.8; margin-bottom:16px;">
        Только для владельца. Регистрация отключена.
      </div>

      <div style="text-align:left;">
        <label style="display:block; font-size:12px; opacity:.85; margin-bottom:6px;">
          Логин
        </label>
        <input
          id="auth-login"
          autocomplete="username"
          style="width:100%; padding:10px; border-radius:10px; border:1px solid #333; background:#0b0b0b; color:#fff; margin-bottom:12px;"
        />

        <label style="display:block; font-size:12px; opacity:.85; margin-bottom:6px;">
          Пароль
        </label>
        <input
          id="auth-pass"
          type="password"
          autocomplete="current-password"
          style="width:100%; padding:10px; border-radius:10px; border:1px solid #333; background:#0b0b0b; color:#fff; margin-bottom:14px;"
        />
      </div>

      <div
        id="auth-error"
        style="display:none; color:#ff6b6b; font-size:12px; margin-bottom:12px;"
      >
        Неверный логин или пароль
      </div>

      <button
        id="auth-submit"
        style="
          width:100%;
          padding:11px;
          border-radius:10px;
          border:0;
          background:#36A2EB;
          color:#fff;
          font-weight:700;
          cursor:pointer;
          transition: background .15s ease;
        "
        onmouseover="this.style.background='#2b8fd8'"
        onmouseout="this.style.background='#36A2EB'"
      >
        Войти
      </button>

    </div>
  </div>

  <div id="app" class="min-h-screen"></div>

  <script>
    window.API_URL = "https://bookshelf-2ip1.onrender.com";
  </script>
  <script src="./app.js?v=2"></script>
</body>
</html>